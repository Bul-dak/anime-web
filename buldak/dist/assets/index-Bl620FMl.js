(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const d=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},u=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):[]},l=()=>{d("recommendedAnime",[])},p=e=>{const t=document.getElementById("detailed-view"),n=document.createElement("img");n.setAttribute("src",e.imageUrl),n.setAttribute("alt",`Picture of ${e.title}`);const o=document.createElement("h3");if(o.textContent=e.title,o.setAttribute("id","main-title"),t.append(n,o),e.titleEnglish){const r=document.createElement("h4");r.textContent=e.titleEnglish,t.append(r)}if(e.type){const r=document.createElement("p");r.textContent=`Type: ${e.type}`,r.setAttribute("id","type"),t.append(r)}if(e.episodes){const r=document.createElement("p");r.textContent=`Episodes: ${e.episodes}`,r.setAttribute("id","episodes"),t.append(r)}if(e.studio){const r=document.createElement("p");r.textContent=`Studio: ${e.studio}`,r.setAttribute("id","studio"),t.append(r)}if(e.rank){const r=document.createElement("p");r.textContent=`Rank: ${e.rank}`,r.setAttribute("id","rank"),t.append(r)}if(e.aired){const r=document.createElement("p");r.textContent=`Aired: ${e.aired}`,r.setAttribute("id","aired"),t.append(r)}if(e.synopsis){const r=document.createElement("p");r.textContent=`Synopsis: ${e.synopsis}`,r.setAttribute("id","synopsis");const a=document.createElement("div");a.setAttribute("id","synopsis"),a.append(r),t.append(a)}if(e.trailer){const r=document.createElement("div");console.log(e.trailer),r.innerHTML=`
      <iframe
        width="320"
        height="240"
        src=${e.trailer}
        title="YouTube video player"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
      ></iframe>
    `,t.append(r)}const s=document.createElement("button");s.setAttribute("id","save-anime"),s.addEventListener("click",S),s.textContent="Save to Watch List";const i=document.createElement("button");i.setAttribute("id","close-modal"),i.addEventListener("click",L),i.textContent="Close",t.append(s,i)},g=()=>{const e=u("allAnime"),t=document.querySelector("#top-five-anime");for(let n=0;n<=5;n++){const o=document.createElement("div");o.classList="anime-card";const s=document.createElement("img");s.setAttribute("class","anime-img"),s.src=e[n].image,s.setAttribute("data-id",e[n].id),s.addEventListener("click",m);const i=document.createElement("h3");i.classList="anime-title",i.textContent=e[n].title,o.append(s),o.append(i),t.append(o)}},y=e=>{const t=document.getElementById("render-zone"),n=document.createElement("img");n.setAttribute("src",e.image),n.setAttribute("alt",`Picture of ${e.title}`),n.setAttribute("data-id",e.id),n.addEventListener("click",m);const o=document.createElement("h3");o.textContent=e.title,o.setAttribute("id","main-title"),t.append(n,o)},f="https://api.jikan.moe/v4/anime",c=async e=>{try{const t=await fetch(e);if(!t.ok)throw Error(`HTTP Error: ${t.status}`);return t.json()}catch(t){console.log(t.message),console.error(t)}},A=async e=>{const t=`${f}/${e}/full`,n=await c(t);console.log("Testing getAnimeById",n);const o={id:n.data.mal_id,title:n.data.title,titleEnglish:n.data.title_english,imageUrl:n.data.images.jpg.image_url,type:n.data.type,episodes:n.data.episodes,aired:n.data.aired.string,duration:n.data.duration,rating:n.data.rating,rank:n.data.rank,synopsis:n.data.synopsis,studio:n.data.studios[0].name,trailer:n.data.trailer.embed_url};return console.log("Anime Object: ",o),o},h=async e=>{try{const t=await c(e),n=[];t.data.forEach(o=>{const s=()=>{let i=[];return o.genres.forEach(r=>{i.push(r.name)}),i};(o.type==="TV"||o.movie==="Movie")&&n.push({id:o.mal_id,title:o.title,image:o.images.jpg.image_url,type:o.type,popularity:o.rank,genres:s()})}),d("allAnime",n)}catch(t){return console.warn(t.message),null}},E="https://api.jikan.moe/v4/anime",v=async()=>{console.log("getRandomAnime is executing");const e=await c(E);console.log(e);const t=[];e.data.forEach(o=>{const s=()=>{let i=[];return o.genres.forEach(r=>{i.push(r.name)}),i};(o.type==="TV"||o.movie==="Movie")&&t.push({id:o.mal_id,title:o.title,image:o.images.jpg.image_url,type:o.type,popularity:o.rank,genres:s()})}),console.log("Below is all anime array final for getRandomAnime function",t);const n=t[Math.floor(Math.random()*t.length)];return console.log(n),n},m=async e=>{const n=e.target.dataset.id,o=await A(n),s=document.querySelector("dialog");s.innerHTML="",p(o),s.showModal()},L=async()=>{const e=document.querySelector("dialog");e.innerHTML="",e.close()},w=async e=>{e.preventDefault();const t=document.querySelector("form");l();const n=new FormData(e.target),o=Object.fromEntries(n),{type:s,genre:i}=o;console.log(o),console.log(s,i),t.reset()},S=async e=>{},b=async()=>{const e=document.getElementById("render-zone");e.innerHTML="";const t=await v();console.log(t),y(t)},C="https://api.jikan.moe/v4/top/anime",k=async()=>{l(),await h(C),g(),document.querySelector("form").addEventListener("submit",w),document.getElementById("random-button").addEventListener("click",b)};k();
